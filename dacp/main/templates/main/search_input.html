<div class="flex items-center bg-gray-800 rounded-full px-3 py-1 border border-gray-700 focus-within:border-primary transition-all duration-300 animate__animated animate__fadeInRight origin-right">
    
    <input type="text" 
           id="search-input" 
           name="q" 
           placeholder="Search..." 
           value="{{ search_query|default:"" }}"
           class="bg-transparent border-none outline-none text-sm text-white w-48 transition-all placeholder-gray-500"
           hx-get="{% url "main:catalog_all" %}" 
           hx-target="#main-content" 
           hx-push-url="true"
           hx-trigger="input delay:500ms changed"
           hx-swap="innerHTML"
           autocomplete="off">

    <button class="ml-2 text-gray-500 hover:text-primary transition-colors focus:outline-none"
            hx-get="{% url "main:catalog_all" %}?reset_search=true" 
            hx-target="#search-wrapper"
            hx-swap="innerHTML"
            hx-on::before-request="document.getElementById("search-input").value = """>
        <i class="fa fa-times"></i>
    </button>
</div>

<script>
    setTimeout(() => {
        const input = document.getElementById("search-input");
        if(input) {
            input.focus();
            // Move cursor to the end of the text, if Ñ‹something is there
            const val = input.value;
            input.value = "";
            input.value = val;
        }
    }, 50);
</script>